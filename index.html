<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kernels - by Owen Whelan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Consolas&display=swap" rel="stylesheet">
    <style>
        /* Custom Styles based on owenwhelan.com */
        :root {
            --bg-black: #0D0D0D; /* Darker off-black */
            --text-light: #e0e0e0;
            --orange-glow: #ffae42; /* Lighter Orange */
            --orange-deep: #ff8c00;
            --card-bg: #1a1a1a;
            --card-border: #2a2a2a;
            --filter-inactive: #3a3a3a;
            --gray-text: #9ca3af;
        }

        body {
            background-color: var(--bg-black);
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
        }

        /* Header Styles */
        .header-title {
            font-weight: 700;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .header-title .kernels-text {
            background: linear-gradient(135deg, var(--orange-glow), var(--orange-deep));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .header-divider {
            height: 1.5rem;
            width: 1px;
            background-color: var(--text-light); /* White line */
        }
        .header-btn {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            transition: all 0.2s ease-in-out;
        }
        .header-btn:hover {
            background-color: var(--card-border);
            border-color: var(--orange-deep);
        }

        /* Article Card Styles */
        .article-card-wrapper {
            perspective: 1000px;
        }
        .article-card {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            transition: transform 0.2s ease-out, box-shadow 0.3s ease, opacity 0.4s ease;
            opacity: 1;
            transform-style: preserve-3d;
            display: flex;
            flex-direction: column;
        }
        .card-content {
            flex-grow: 1;
        }
        .card-footer {
            margin-top: auto;
        }
        .card-date {
            font-weight: 600;
            color: var(--gray-text);
        }
        .card-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 500;
            color: white;
        }
        
        /* Filter & Sort Styles */
        .filter-btn {
            border: 2px solid transparent;
            transition: all 0.2s ease-in-out;
            color: var(--text-light);
        }
        .filter-btn:hover:not(.active) {
            border-color: #5a5a5a;
        }
        .filter-btn.active {
            font-weight: 700;
            border: 2px solid white;
        }
        /* Color-coded tags */
        .tag-color-0 { background-color: #800000; } /* Maroon */
        .tag-color-1 { background-color: #000080; } /* Navy */
        .tag-color-2 { background-color: #006400; } /* Dark Green */
        .tag-color-3 { background-color: #483d8b; } /* Dark Slate Blue */
        
        #sort-select {
            background-color: var(--filter-inactive);
            border: 1px solid var(--card-border);
            color: var(--text-light);
        }

        /* Modal Styles */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            max-height: 90vh;
        }
        #about-page {
            background-color: var(--bg-black);
        }
        
        /* Custom Markdown Parsed Content Styles */
        .article-body h1 { display: none; }
        .article-body h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--card-border);
        }
        .article-body p, .article-body .md-small-text, .article-body .md-blockquote, .article-body .md-code-block {
            margin-bottom: 1.25rem;
        }
        .article-body .md-img-caption {
            display: block;
            text-align: center;
            color: var(--gray-text);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        .article-body .md-small-text {
            color: var(--gray-text);
            font-size: 0.9rem;
            text-align: justify;
        }
        .article-body .md-blockquote {
            background-color: #222;
            border-left: 4px solid var(--orange-deep);
            padding: 1rem 1.5rem;
            border-radius: 0 8px 8px 0;
        }
        .article-body .md-blockquote p { margin: 0; }
        .article-body .md-blockquote-author {
            text-align: right;
            margin-top: 1rem;
            font-style: italic;
            color: var(--gray-text);
        }
        .article-body .md-blockquote-author .author-name {
            display: block;
            font-weight: bold;
            color: var(--text-light);
        }
        .article-body .md-code-block {
            background-color: #0d1117;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .article-body .md-code-header {
            background-color: #2a2a2a;
            padding: 0.75rem 1rem;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            font-family: 'Inter', sans-serif; /* Regular font */
            color: var(--gray-text);
            font-size: 0.9rem;
        }
        .article-body .md-code-content {
            padding: 1.5rem;
            overflow-x: auto;
            color: white;
            font-family: 'Consolas', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .article-body .md-definition {
            position: relative;
            text-decoration: underline dotted var(--gray-text);
            text-underline-offset: 4px; /* Spacing */
            cursor: help;
        }
        .article-body .md-definition-tooltip {
            visibility: hidden;
            width: 250px;
            background-color: #252525;
            color: var(--text-light);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid var(--card-border);
            font-size: 0.9rem;
            font-style: normal;
        }
        .article-body .md-definition-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #252525 transparent transparent transparent;
        }
        .article-body .md-definition:hover .md-definition-tooltip {
            visibility: visible;
            opacity: 1;
        }
        .article-body a {
            color: var(--orange-glow);
            text-decoration: underline;
        }
        .article-body a:hover { color: var(--orange-deep); }
        
        /* About Page Specific Styles */
        #about-page h2 {
            font-size: 1.25rem;
            color: var(--orange-glow);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-weight: 700;
        }
        #about-page h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-light);
            margin-top: 1rem;
            margin-bottom: 0.25rem;
        }
        #about-page ul { list-style-type: none; padding-left: 0; }
        #about-page li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
        }
        #about-page li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--orange-deep);
        }

    </style>
</head>
<body class="bg-bg-black text-text-light">

    <!-- Header -->
    <header class="p-4 md:p-6 border-b border-card-border sticky top-0 bg-bg-black/80 backdrop-blur-sm z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="header-title">
                <span>Owen Whelan</span>
                <div class="header-divider"></div>
                <span class="kernels-text">Kernels</span>
            </div>
            <div class="flex items-center space-x-4">
                <button id="about-btn" class="header-btn px-4 py-2 rounded-lg text-sm font-semibold">About</button>
                <a href="http://owenwhelan.com" target="_blank" class="header-btn px-4 py-2 rounded-lg text-sm font-semibold">owenwhelan.com</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 md:p-8">
        <!-- Welcome Blurb -->
        <div class="text-center mb-8">
            <h1 class="text-xl md:text-2xl font-normal text-gray-300">Welcome!</h1>
            <div class="w-24 h-px bg-orange-deep mx-auto mt-4"></div>
        </div>

        <!-- Controls -->
        <div id="controls-container" class="flex flex-wrap justify-center items-center gap-x-6 gap-y-4 mb-12">
            <div class="flex items-center gap-4">
                <span class="font-semibold">Filters:</span>
                <div id="filter-buttons" class="flex flex-wrap justify-center gap-2">
                    <!-- Filter buttons will be dynamically inserted here -->
                </div>
            </div>
            <div class="flex items-center gap-2">
                <label for="sort-select" class="font-semibold">Sort by:</label>
                <select id="sort-select" class="rounded p-1 text-sm">
                    <option value="newest" selected>Newest</option>
                    <option value="oldest">Oldest</option>
                </select>
            </div>
        </div>

        <!-- Article Grid -->
        <div id="articles-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Article cards will be dynamically inserted here -->
        </div>
    </main>

    <!-- Article Modal -->
    <div id="article-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 modal-backdrop">
        <div class="modal-content w-full max-w-4xl rounded-lg shadow-lg overflow-hidden flex flex-col">
            <!-- Modal Header -->
            <div class="p-6 border-b border-card-border flex-shrink-0">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 id="modal-title" class="text-2xl lg:text-3xl font-bold text-orange-glow"></h2>
                        <h3 id="modal-subtitle" class="text-lg text-gray-400 mt-1"></h3>
                        <div class="text-sm text-gray-500 mt-3">
                            <span id="modal-byline"></span>
                            <span id="modal-ft" class="ml-1"></span>
                        </div>
                    </div>
                    <button id="close-modal-btn" class="text-3xl text-gray-500 hover:text-white">&times;</button>
                </div>
            </div>
            <!-- Modal Body -->
            <div id="modal-body" class="p-6 lg:p-8 overflow-y-auto article-body">
                <!-- Parsed article content goes here -->
            </div>
        </div>
    </div>
    
    <!-- About Page (Fullscreen) -->
    <div id="about-page" class="fixed inset-0 z-[60] hidden p-8 md:p-12 overflow-y-auto">
        <button id="close-about-btn" class="fixed top-6 right-8 text-4xl text-gray-400 hover:text-white z-10">&times;</button>
        <div class="container mx-auto max-w-3xl">
            <h1 class="text-4xl font-bold text-orange-glow mb-8">About Kernels</h1>
            
            <h2>ABOUT</h2>
            <p class="text-gray-300 mb-2">Placeholder text about Kernels</p>
            <p class="text-gray-300">Other paragraph</p>

            <h2>PRINCIPLES</h2>
            <h3>READABILITY</h3>
            <ul>
                <li>Nothing I publish should be too wordy</li>
                <li>If your natural instinct is to make an AI summary, it needs to be edited</li>
                <li>It’s conversational, casual, and easy to digest</li>
            </ul>

            <h3>PERSONALITY</h3>
            <ul>
                <li>I write about things because I actually want to write about them</li>
                <li>My opinions are distinctly me</li>
                <li>I choose what I write</li>
            </ul>

            <h3>QUALITY</h3>
            <ul>
                <li>Things I discuss are fun, but relevant to the real world</li>
                <li>I give sources where necessary and have nuanced opinions</li>
                <li>It’s actually me writing</li>
            </ul>

            <h2>AI POLICY</h2>
            <p class="text-gray-300">I may use generative artificial intelligence to research sources or analyze a document. However, I never include purely generated text in my writing and vet sources. I stand behind my work and am committed to making it mine.</p>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- DATABASE ---
        const articlesData = [
`
# Vibe Coding and So-Called AI “Art”
## Worth the Time it Takes You
by:Owen Whelan
ft:none
tags:AI, RantOp
date:
summary:One of the biggest and most prominent arguments around AI generated content is what creativity should look like. Arguments that it is real “art” often mention that generative AI is simply an evolution of visual mediums.

One of the biggest and most prominent arguments around AI generated content is what creativity should look like. Arguments that it is real “art” often mention that generative AI is simply an evolution of visual mediums:

/blockquote(Craig Boehman)(American Photographer/Artist) I love using AI to create art. It’s not only about convenience. For me, at the heart of it, it’s about expression and intention. These two traits, I believe, are essential to any definition of art. I’ll add that a sense of connection should then be experienced by the artist, because without that connection, then it isn’t “good” art for the artist to be creating, be it AI or otherwise.

Generally speaking, even if you are an AI-only “artist” you still do need to have some sort of core intention in your prompt. No matter how small, there is a morsel of human thought behind AI art — but the contrary highlights that the morsel manifests itself as something huskless:

/blockquote(Jerry Saltz)(American Art Critic) There’s a difference between AI as a tool for human expression — which would make it part of a category that includes all kinds of tools, from cameras to Photoshop — and AI as the entity that is expressing itself. … But I don’t know if I can relate to that ghost in any way; I don’t know what its experiences are or if they even matter. Maybe its sensibilities are as rudimentary as those of a virus or a parasite.

I’m inclined to agree with Saltz here; the convenience aspect of {AI “art”}{When a creative work entirely stems from an AI model with little to no other input. I use quotes around art for this mention as I don’t truly think it can be art on its own.} steps over the human element that often gives art its value. AI slop litters the internet with no true purpose other than [engagement bait and profits](https://www.theguardian.com/global/commentisfree/2025/jan/08/ai-generated-slop-slowly-killing-internet-nobody-trying-to-stop-it). The publication of AI “art” and the “I did this!” piece of it — is not filled with the pride or excitement that creating an art piece from scratch might come with.

AI is also great at coding. It’s one of the top factors ranked on [LMArena](http://lmarena.ai) and drives new industry standards like Cursor and Windsurf. {Vibe coding}{The practice of coding a game, program, or website almost entirely via an AI tool} has become a term popular enough for [Wikipedia](https://en.wikipedia.org/wiki/Vibe_coding), with Google [adopting the idea and term](https://cloud.google.com/discover/what-is-vibe-coding) and [apps popping up](https://apps.apple.com/us/app/gizmo-make-gizmos/id6740640581) dedicated to *experimenting with vibes*.

To many, [code is art:](https://daedtech.com/is-programming-art/) you’re bringing an idea to life through a medium that has many of the same human elements as art: trial and error, brainstorming and critiquing, and of course the satisfaction of showcasing work to the world. Therefore, is vibe coding a form of AI “art?” Is vibe coding [the same slop that plagues social media](https://www.theguardian.com/commentisfree/2025/apr/21/ai-slop-artificial-intelligence-social-media)?

As someone who vibe coded their [whole portfolio](http://owenwhelan.com) (and the website you’re probably reading this on) I’d like to argue that vibe coding — while not quite *developing* — is an art in of itself; and it’s building a reputation distant from AI “art.”

I’m not going to call myself a “developer” for vibe coding the same way I dismiss “artists” who solely use AI tools for creation. However, unlike prompting an AI to make art, much more goes into vibe coding a program.

## Is Vibe Coding Effort?

Once a human has an idea for a vibe code project, the road to making it function in the way you envision is much more frustrating and arduous than AI art. While the smallest scrap of an idea is needed for an AI art “piece”:
\`\`\`prompt
Samurai cat, blue
\`\`\`
…the same amount of effort can’t quite land a vibe coded project:

\`\`\`prompt
My résumé as a website
\`\`\`
First of all, you need to *have* a résumé, but then what does that *look* like? Is a plain text HTML document really impressive to recruiters? What parts of your résumé should be left out? Do you have projects you want to highlight? You just can’t make it the full way without at least *trying* a bit more. 

It also matters about industry: someone’s corporate business résumé looks way different than that of a graphic designer with a visual portfolio or a computer scientist projects section. People are different too: do you want your résumé to look like whatever the first prompt gave you? Does that *represent* you?

Fine tuning (whether it’s manually editing the code or iterating on a prompt) isn’t an optional step when it comes to vibe coding. The first draft usually has a certain tinge of AI-ness and it *can* feel huskless. However, it’s with that iterative process (which I dare say takes *effort*) that makes it something worth taking a look at.

When it comes to decorating and creating features, creating {pseudo-drafts}{My own idea — I use this term to refer to a representation of a website that might not actually function like one — think a sketch or Canva PDF.} goes a long way and, fortunately, requires the [human-in-the-loop](https://cloud.google.com/discover/human-in-the-loop) that AI ethicists like going for.

## Is Vibe Coding Creative?

Vibe coding isn’t creative when you plagarize from it the same way someone could {“regularly” plagiarize}{Not an official term, but I’m referring to just straight up copy-pasting an AI generated output — like “write my essay.”} from ChatGPT. There is a large difference between:

\`\`\`prompt
make a tetris clone
\`\`\`

and

\`\`\`prompt
Please see the attached PDF with an outline for a study application that combines the puzzle features from Tetris and target material. Make it an HTML document. Use CSS styling and please litter the code with calls to the console for debugging and amending your work.
\`\`\`

In a world of AI slop, it’s what distinct that stands out. Asking Google Gemini to make something that someone could make in 10 minutes using {Scratch}{Block coding program accessible to all ages. A very cool platform.} is not an expression of skill or creativity. It’s the time dumped into conceptualizing, reimagining, and refining an idea that makes it stand out. 

Something as simple as color choice says something about you. Expert readers too can detect when something was written by AI or written by a person — so whether you just use AI for *code* or for actual content may speak to your work as well.

## Is Vibe Coding Skilled?

The easiest way to ask this question is to frame it from the perspective of *can you be bad at it?*

In one way, no actually. You can literally just ask it to make something and you might get lucky. The model, in this case, is the real skilled one. The barrier to entry of making a first draft — whether it’s barebones or close to a final one — is a prompt away. 

But returning to the creative argument: if it’s the first draft, *people can notice.* It takes some creative skill to come up with the idea for a vibe coded app that represents your values and does exactly what you need it to do. If we were able to download an image from your mind’s eye, maybe it wouldn’t be as skilled — but articulating that idea and then getting it to actually work is a process in itself.

And what else do you need to get started? If you’re reprompting an AI to make small changes (i.e., modify a line of text) you’re going to end up wasting time and resources. Diving into the code to change up a few words or the color of something takes a bit of coding knowledge some might shy away from. 

## What’s Next for Code?

I think that the web is going to move in a very distinct direction: “classic” websites of text and buttons aren’t going to cut it in a couple years when anyone can vibe code an interactive game that takes you through their portfolio or a personalized assistant that walks you through their latest projects. Having a website — seeing how easy it is becoming to make one — might become the standard. The same might be able to be said for other forms of media, with [gaming giants](https://www.fortnite.com/news/this-will-be-a-day-long-remembered-speak-with-darth-vader-in-fortnite?lang=en-US) are already stepping into it and there’s no sign of anything stopping.

Trying out AI tools for coding is free and you can find a sense of pride in making something. Developers and consumers of digital content in the AI modern era can look forward to a shift: whether it’s transformative or slop-esque is up to us.
`,
`
# Test Article Title
## Test Article Subtitle
by:
ft:Test User 1, Test User 2
tags:Test1, Test2
date:Jul-30-2025
summary:This is a test summary for an article that shows off all the features of the custom markdown parser.

This is the first paragraph of the test article. It can contain links like this one to [Google](https://google.com). It can also contain *italic text*.

## This is an Inline Subtitle
This paragraph comes after a subtitle. It also includes a {definition}{This is the explanation that shows up on hover.} which is a cool feature.

[imglink=https://placehold.co/600x400/1a1a1a/e0e0e0?text=Placeholder+Image]
-c#This is a caption for the image above. It is small, gray, and centered.

/blockquote(A. Person)(Thinker) This is a blockquote. It's formatted to stand out from the rest of the text.

-#This is a small text block. It is gray but justified like a normal paragraph, used for asides or footnotes within the text body.

Here is a code block:
\`\`\`javascript
function helloWorld() {
  console.log("Hello, World!");
}
\`\`\`

And that concludes the test article.
`
        ];

        // --- DOM Elements ---
        const articlesGrid = document.getElementById('articles-grid');
        const filterButtonsContainer = document.getElementById('filter-buttons');
        const sortSelect = document.getElementById('sort-select');
        const articleModal = document.getElementById('article-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const aboutPage = document.getElementById('about-page');
        const aboutBtn = document.getElementById('about-btn');
        const closeAboutBtn = document.getElementById('close-about-btn');
        
        let allArticles = [];
        let activeFilters = new Set();
        const tagColorMap = new Map();
        const tagDescMap = new Map([
            ['AI', 'Articles about Artificial Intelligence.'],
            ['RantOp', 'Opinion pieces and rants.'],
            ['Test1', 'This is a test tag for demonstration.'],
            ['Test2', 'This is another test tag.']
        ]);
        const colorClasses = ['tag-color-0', 'tag-color-1', 'tag-color-2', 'tag-color-3'];
        let nextColorIndex = 0;

        function parseMarkdown(text) {
            const lines = text.trim().split('\n');
            const article = {
                title: '?', subtitle: '?', by: '?', ft: 'none', tags: [], date: '?', summary: '?', rawContent: ''
            };

            let contentStartIndex = 0;
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                if (line.startsWith('# ')) {
                    article.title = line.substring(2).trim() || '?';
                } else if (line.startsWith('## ')) {
                    article.subtitle = line.substring(3).trim() || '?';
                } else if (line.startsWith('by:')) {
                    article.by = line.substring(3).trim() || '?';
                } else if (line.startsWith('ft:')) {
                    article.ft = line.substring(3).trim() || 'none';
                } else if (line.startsWith('tags:')) {
                    article.tags = line.substring(5).split(',').map(tag => tag.trim()).filter(t => t).sort();
                } else if (line.startsWith('date:')) {
                    let dateStr = line.substring(5).trim();
                    if (!dateStr) {
                         const today = new Date();
                         const options = { year: 'numeric', month: 'long', day: 'numeric' };
                         dateStr = today.toLocaleDateString('en-US', options);
                    } else {
                         dateStr = new Date(dateStr).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                    }
                    article.date = dateStr;
                    article.dateObj = new Date(dateStr);
                } else if (line.startsWith('summary:')) {
                    article.summary = line.substring(8).trim() || '?';
                    contentStartIndex = i + 1;
                    break; 
                }
            }
            
            let rawContent = lines.slice(contentStartIndex).join('\n').trim();
            
            if (article.summary === '?') {
                const firstPara = rawContent.split('\n\n')[0];
                article.summary = firstPara.substring(0, 150) + '...';
            }
            
            article.rawContent = rawContent;
            return article;
        }

        function renderContentToHTML(rawContent) {
            let html = rawContent
                .replace(/```(\w*)\n([\s\S]*?)```/g, (match, lang, code) => {
                    const escapedCode = code.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                    return `<div class="md-code-block"><div class="md-code-header">${lang}</div><pre class="md-code-content"><code>${escapedCode.trim()}</code></pre></div>`;
                })
                .replace(/^## (.*$)/gm, '<h3>$1</h3>')
                .replace(/^\/blockquote\((.*?)\)\((.*?)\)\s*(.*)/gm, `<div class="md-blockquote"><p>$3</p><div class="md-blockquote-author"><span class="author-name">- $1</span><span class="author-title">$2</span></div></div>`)
                .replace(/^\[imglink=(.*?)\]/gm, '<img src="$1" alt="Article image" class="rounded-lg mx-auto my-4 max-w-full h-auto">')
                .replace(/^\[imgref=(.*?)\]/gm, '<img src="images/$1" alt="Article image" class="rounded-lg mx-auto my-4 max-w-full h-auto">')
                .replace(/^-c#(.*)/gm, '<span class="md-img-caption">$1</span>')
                .replace(/^-#(.*)/gm, '<p class="md-small-text">$1</p>')
                .replace(/\{(.*?)\}\{(.*?)\}/g, '<span class="md-definition">$1<span class="md-definition-tooltip">$2</span></span>')
                .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .split('\n\n').map(p => p.trim()).filter(p => p).map(p => {
                    if (p.startsWith('<div') || p.startsWith('<h3') || p.startsWith('<p class="md-small-text"')) return p;
                    return `<p>${p.replace(/\n/g, '<br>')}</p>`;
                }).join('');

            return html;
        }

        function renderArticles(articles) {
            articlesGrid.innerHTML = '';
            articles.forEach(article => {
                const wrapper = document.createElement('div');
                wrapper.className = 'article-card-wrapper';

                const card = document.createElement('div');
                card.className = 'article-card rounded-lg p-6 cursor-pointer h-full';
                card.dataset.tags = article.tags.join(',');

                const tagsHTML = article.tags.map(tag => {
                    const colorClass = tagColorMap.get(tag) || '';
                    return `<span class="card-tag ${colorClass}">${tag}</span>`;
                }).join(' ');

                card.innerHTML = `
                    <div class="card-content">
                        <h2 class="text-xl font-bold mb-2">${article.title}</h2>
                        <h3 class="text-md text-gray-400 mb-4">${article.subtitle}</h3>
                        <p class="text-sm text-gray-300 mb-4 h-20 overflow-hidden">${article.summary}</p>
                    </div>
                    <div class="card-footer">
                        <div class="flex items-center justify-between">
                            <div class="card-date text-xs">${article.date}</div>
                            <div class="flex gap-2">${tagsHTML}</div>
                        </div>
                    </div>
                `;
                card.addEventListener('click', () => openArticleModal(article));
                
                wrapper.appendChild(card);
                articlesGrid.appendChild(wrapper);

                wrapper.addEventListener('mousemove', (e) => {
                    const cardRect = card.getBoundingClientRect();
                    const x = e.clientX - cardRect.left;
                    const y = e.clientY - cardRect.top;
                    const midCardX = cardRect.width / 2;
                    const midCardY = cardRect.height / 2;
                    const rotateY = (x - midCardX) / midCardX * 10;
                    const rotateX = (midCardY - y) / midCardY * 10;
                    card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                    card.style.boxShadow = '0 15px 30px rgba(0,0,0,0.4)';
                });

                wrapper.addEventListener('mouseleave', () => {
                    card.style.transform = 'rotateX(0) rotateY(0) scale(1)';
                    card.style.boxShadow = 'none';
                });
            });
        }
        
        function openArticleModal(article) {
            document.getElementById('modal-title').textContent = article.title;
            document.getElementById('modal-subtitle').textContent = article.subtitle;
            const bylineEl = document.getElementById('modal-byline');
            const ftEl = document.getElementById('modal-ft');
            
            bylineEl.textContent = `by ${article.by} | ${article.date}`;
            
            if (article.ft !== 'none' && article.ft !== '?') {
                ftEl.textContent = `(with help from ${article.ft})`;
                ftEl.classList.remove('hidden');
            } else {
                ftEl.textContent = '';
                ftEl.classList.add('hidden');
            }
            
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = renderContentToHTML(article.rawContent);
            modalBody.scrollTop = 0;
            
            articleModal.classList.remove('hidden');
            articleModal.classList.add('flex');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            articleModal.classList.add('hidden');
            articleModal.classList.remove('flex');
            aboutPage.classList.add('hidden');
            aboutPage.classList.remove('flex');
            document.body.style.overflow = 'auto';
        }

        function createFilterButtons() {
            const allTags = new Set(allArticles.flatMap(a => a.tags));
            allTags.forEach(tag => {
                if (!tagColorMap.has(tag)) {
                    tagColorMap.set(tag, colorClasses[nextColorIndex % colorClasses.length]);
                    nextColorIndex++;
                }

                const button = document.createElement('button');
                button.className = `filter-btn px-3 py-1 rounded-full text-sm ${tagColorMap.get(tag)}`;
                button.textContent = tag;
                button.dataset.tag = tag;
                button.title = tagDescMap.get(tag) || `Articles tagged with "${tag}"`;
                button.addEventListener('click', () => toggleFilter(button));
                filterButtonsContainer.appendChild(button);
            });
        }
        
        function toggleFilter(button) {
            const tag = button.dataset.tag;
            button.classList.toggle('active');
            if (activeFilters.has(tag)) {
                activeFilters.delete(tag);
            } else {
                activeFilters.add(tag);
            }
            updateArticleDisplay();
        }
        
        function updateArticleDisplay() {
            let sortedArticles = [...allArticles];
            const sortOrder = sortSelect.value;

            if (sortOrder === 'newest') {
                sortedArticles.sort((a, b) => b.dateObj - a.dateObj);
            } else {
                sortedArticles.sort((a, b) => a.dateObj - b.dateObj);
            }

            if (activeFilters.size > 0) {
                const matched = [];
                const unmatched = [];
                sortedArticles.forEach(article => {
                    const articleTags = new Set(article.tags);
                    const hasActiveTag = [...activeFilters].some(filterTag => articleTags.has(filterTag));
                    if (hasActiveTag) {
                        matched.push(article);
                    } else {
                        unmatched.push(article);
                    }
                });
                sortedArticles = [...matched, ...unmatched];
            }
            
            renderArticles(sortedArticles);
            
            // Re-apply opacity to unmatched articles after reordering
            if (activeFilters.size > 0) {
                const cards = document.querySelectorAll('.article-card');
                cards.forEach(card => {
                    const cardTags = new Set(card.dataset.tags.split(','));
                    const hasActiveTag = [...activeFilters].some(filterTag => cardTags.has(filterTag));
                    card.style.opacity = hasActiveTag ? '1' : '0.25';
                });
            } else {
                 document.querySelectorAll('.article-card').forEach(c => c.style.opacity = '1');
            }
        }

        function init() {
            allArticles = articlesData.map(parseMarkdown).filter(a => a.title !== '?');
            
            createFilterButtons();
            updateArticleDisplay();

            sortSelect.addEventListener('change', updateArticleDisplay);

            closeModalBtn.addEventListener('click', closeModal);
            articleModal.addEventListener('click', (e) => {
                if (e.target === articleModal) closeModal();
            });

            aboutBtn.addEventListener('click', () => {
                aboutPage.classList.remove('hidden');
                aboutPage.classList.add('flex');
                document.body.style.overflow = 'hidden';
            });
            closeAboutBtn.addEventListener('click', closeModal);
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeModal();
            });
        }

        init();
    });
    </script>
</body>
</html>
